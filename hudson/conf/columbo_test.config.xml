<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <hudson.model.ParametersDefinitionProperty>
      <parameterDefinitions>
        <hudson.model.RunParameterDefinition>
          <name>COLUMBO_BUILD</name>
          <description>Which Columbo build to use for the deploy and test.</description>
          <projectName>columbo</projectName>
        </hudson.model.RunParameterDefinition>
      </parameterDefinitions>
    </hudson.model.ParametersDefinitionProperty>
    <hudson.plugins.disk__usage.DiskUsageProperty/>
  </properties>
  <scm class="hudson.scm.NullSCM"/>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers class="vector"/>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command>#~/src/ckoenig/hudson/create_or_overwrite_yroot.sh columbo_test --i386 4.8-20090518
echo $COLUMBO_BUILD

PERLPREREQS=&quot;perlbase perl58_compat&quot;

yroot columbo_test --cmd &quot;yinst install $PERLPREREQS&quot;
yroot columbo_test --cmd &quot;yinst install -br test ~/.hudson/jobs/columbo/lastStable/archive/pkg/yellowstone_columbo_perl-*.tgz&quot;
yroot columbo_test --cmd &quot;~/src/ckoenig/hudson/columbo_syntax_check.sh&quot;

GATEWAYS=&quot;af1183.yss.ac4.yahoo.com ysadm1001.yss.ac2.yahoo.com ysadm1001.yss.sk1.yahoo.com&quot;
for HOST in $GATEWAYS; do
    scp ~/.hudson/jobs/columbo/lastStable/archive/pkg/yellowstone_columbo_perl-*.tgz $HOST:/tmp/latest_columbo_package.tgz
    ssh $HOST &quot;sudo yinst install $PERLPREREQS; sudo yinst install -br test /tmp/latest_columbo_package.tgz&quot;
done

echo &quot;Running test scripts in t/ directory...&quot;
for TEST in `ls /home/ckoenig/.hudson/jobs/columbo/workspace/src/perl/t/*.pl`; do
    yroot columbo_test --cmd &quot;$TEST&quot;
done

# Now that it&apos;s working elsewhere, install it outside of the yroot:
yinst install -br test ~/.hudson/jobs/columbo/lastStable/archive/pkg/yellowstone_columbo_perl-*.tgz

#~/src/ckoenig/hudson/remove_yroot.sh columbo_test</command>
    </hudson.tasks.Shell>
  </builders>
  <publishers/>
  <buildWrappers/>
</project>